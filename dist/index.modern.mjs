import e,{useState as t}from"react";import*as r from"yup";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(null,arguments)}function a(t){const r={required:l(t).required,filter:l(t).filter,search:l(t).search,pagination:l(t).pagination},a={filter:t&&t.filter||{},required:t&&t.required||{},search:t&&t.search||{},pagination:t&&t.pagination||{page:1,size:10}};let[i,o]=e.useState(r),[s,u]=e.useState(a);function l(e){return{required:e&&e.required?g(e.required.value):"",filter:e&&e.filter?g(e.filter.value):"",search:e&&e.search?g(e.search.value):"",pagination:g(e&&e.pagination?e.pagination:{page:1,size:10})}}function c(e){return null!==e&&"object"==typeof e}function g(e){if(!e)return"";const t=[];return function e(r,n=""){if(!c(r))return t.push(n+`=${encodeURIComponent(r)}`);const a=Object.keys(r);for(let t of a)if(c(r)){let a=n?Array.isArray(r)?"[]":`[${t}]`:`${t}`;e(r[t],n+a)}return r}(e),t.join("&")}function f(){let e="",t=Object.keys(i);for(let n of t)e=e?e+((r=i[n])?"&"+r:r):i[n];var r;return e}function p(e){u(t=>n({},JSON.parse(JSON.stringify(t)),{pagination:e}))}return{query:i,toolState:s,fullReset:function(){o(r),u(a)},getQuery:f,getQueryString:function(){return f()},handleFilter:function(e){var t,r;o(t=>{var r;return n({},JSON.parse(JSON.stringify(t)),{filter:g(e.value),pagination:g({page:1,size:null==s||null==(r=s.pagination)?void 0:r.size})})}),r=e,u(e=>n({},JSON.parse(JSON.stringify(e)),{filter:r})),p({page:1,size:null==s||null==(t=s.pagination)?void 0:t.size})},handlePagination:function(e=1,t=10){o(r=>n({},JSON.parse(JSON.stringify(r)),{pagination:g({page:e,size:t})})),p({page:e,size:t})},handleSearch:function(e){var t,r;o(t=>{var r;return n({},JSON.parse(JSON.stringify(t)),{search:g(e.value),pagination:g({page:1,size:null==s||null==(r=s.pagination)?void 0:r.size})})}),r=e,u(e=>n({},JSON.parse(JSON.stringify(e)),{search:r})),p({page:1,size:null==s||null==(t=s.pagination)?void 0:t.size})},handleRequired:function(e){var t;o(t=>{var r;return n({},JSON.parse(JSON.stringify(t)),{required:g(e.value),pagination:g({page:1,size:null==s||null==(r=s.pagination)?void 0:r.size})})}),t=e,u(e=>n({},JSON.parse(JSON.stringify(e)),{required:t})),p({page:1,size:10})}}}Object.byString=function(e,t){let r=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");for(let t=0,n=r.length;t<n;++t){let n=r[t];if(!(n in e))return;e=e[n]}return e};const i=(t,a)=>{const[i,o]=e.useState(t),[s,u]=e.useState({}),[l,c]=e.useState(!1),g=()=>{o(t),u({})},f=(e,t)=>{const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const n of r){const r=e[n],i=t[n],o=null!==(a=r)&&"object"==typeof a;if(!o&&r!==i)return!1;if(o&&!f(r,i))return!1}var a;return!0};return e.useEffect(()=>{console.log("datamodel",i),console.log("validation error:",s)},[i,s]),e.useEffect(()=>{},[]),{dataModel:i,validationErrors:s,isBusy:l,handleChange:({field:e,value:t})=>{const l=n({},i);l[e]=t,o(l),(async(e,t)=>{const i=n({},s);try{const n=r.reach(a,e);await n.validate(t),delete i[e]}catch(t){i[e]=t.message}finally{u(i)}})(e,t)},handleSubmit:async(e,t,r=!0,n={})=>{e.preventDefault();const o=await(async()=>{const e={abortEarly:!1},t={};try{return await a.validate(i,e),null}catch(e){return e.inner.forEach(e=>{t[e.path]=e.message}),t}})();if(o)return u(o);try{c(!0),await new Promise(async(n,a)=>{try{return await t(i,e),r&&g(),n()}catch(e){return a(e)}})}catch(e){console.log(e)}c(!1)},initiateDataModel:function(e){o(e)},isFormValid:()=>0===Object.keys(s).length,resetForm:g,hasUnsavedData:()=>!f(t,i)}},o=()=>{const[t,r]=e.useState(!1);return{isOpen:t,toggle:()=>{r(e=>!e)}}},s={currentPage:1,hasNextPage:!1,hasPrevPage:!1,nextPage:null,prevPage:null,size:10,totalPages:0,totalResults:0},u=()=>{const[e,r]=t(s);return{pagination:e,updatePaginaion:function(e=s){if("number"!=typeof e.currentPage)throw new Error("currentPage must be a number");if("boolean"!=typeof e.hasNextPage)throw new Error("currentPage must be a number");if("boolean"!=typeof e.hasPrevPage)throw new Error("hasPrevPage must be a boolean");if("number"!=typeof e.nextPage&&null!==e.nextPage)throw new Error("nextPage must be a number or null");if("number"!=typeof e.prevPage&&null!==e.prevPage)throw new Error("prevPage must be a number or null");if("number"!=typeof e.size)throw new Error("size must be a number");if("number"!=typeof e.totalPages)throw new Error("totalPages must be a number");if("number"!=typeof e.totalResults)throw new Error("totalResults must be a number");r(e)}}},l=t=>{let r={};t.forEach(e=>{r[e.action]={status:e.status,id:null}});let[a,i]=e.useState(r);return{processing:a,dispatch:e=>{i(t=>{let r=Object.keys(e)[0],a=Object.values(e)[0],i=n({},t);return i[r]=a,i})}}},c=()=>{const[t,r]=e.useState(!1),n=e.useRef(null);return{contentElementReference:n,copySuccess:t,copyFormatedToClipboard:async function(){if(n.current&&navigator.clipboard){try{await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([n.current.innerHTML],{type:"text/html"})})]),r(!0),console.log("Contentns copied.")}catch(e){console.log("Error copying to clipboard."),console.log(e)}setTimeout(()=>r(!1),2500)}},copyPlainTextToClipBoard:async function(e,t=()=>{}){navigator.clipboard&&(r(!0),await navigator.clipboard.writeText(e),setTimeout(()=>r(!1),2500))}}};export{a as useBuildQueryString,c as useClipboard,o as useDualStateController,i as useForm,u as usePaginationState,l as useProcessing};
//# sourceMappingURL=index.modern.mjs.map
