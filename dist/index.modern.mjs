import e,{useState as t,useEffect as n}from"react";import*as r from"yup";function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(null,arguments)}function i(t){const n={required:s(t).required,filter:s(t).filter,search:s(t).search,pagination:s(t).pagination},r={filter:t&&t.filter||{},required:t&&t.required||{},search:t&&t.search||{},pagination:t&&t.pagination||{page:1,size:10}};let[i,o]=e.useState(n),[u,l]=e.useState(r);function s(e){return{required:e&&e.required?f(e.required.value):"",filter:e&&e.filter?f(e.filter.value):"",search:e&&e.search?f(e.search.value):"",pagination:f(e&&e.pagination?e.pagination:{page:1,size:10})}}function c(e){return null!==e&&"object"==typeof e}function f(e){if(!e)return"";const t=[];return function e(n,r=""){if(!c(n))return t.push(r+`=${encodeURIComponent(n)}`);const a=Object.keys(n);for(let t of a)if(c(n)){let a=r?Array.isArray(n)?"[]":`[${t}]`:`${t}`;e(n[t],r+a)}return n}(e),t.join("&")}function g(){let e="",t=Object.keys(i);for(let r of t)e=e?e+((n=i[r])?"&"+n:n):i[r];var n;return e}function p(e){l(t=>a({},JSON.parse(JSON.stringify(t)),{pagination:e}))}return{query:i,toolState:u,fullReset:function(){o(n),l(r)},getQuery:g,getQueryString:function(){return g()},handleFilter:function(e){var t,n;o(t=>{var n;return a({},JSON.parse(JSON.stringify(t)),{filter:f(e.value),pagination:f({page:1,size:null==u||null==(n=u.pagination)?void 0:n.size})})}),n=e,l(e=>a({},JSON.parse(JSON.stringify(e)),{filter:n})),p({page:1,size:null==u||null==(t=u.pagination)?void 0:t.size})},handlePagination:function(e=1,t=10){o(n=>a({},JSON.parse(JSON.stringify(n)),{pagination:f({page:e,size:t})})),p({page:e,size:t})},handleSearch:function(e){var t,n;o(t=>{var n;return a({},JSON.parse(JSON.stringify(t)),{search:f(e.value),pagination:f({page:1,size:null==u||null==(n=u.pagination)?void 0:n.size})})}),n=e,l(e=>a({},JSON.parse(JSON.stringify(e)),{search:n})),p({page:1,size:null==u||null==(t=u.pagination)?void 0:t.size})},handleRequired:function(e){var t;o(t=>{var n;return a({},JSON.parse(JSON.stringify(t)),{required:f(e.value),pagination:f({page:1,size:null==u||null==(n=u.pagination)?void 0:n.size})})}),t=e,l(e=>a({},JSON.parse(JSON.stringify(e)),{required:t})),p({page:1,size:10})}}}function o(e,i){const[o,u]=t(e),[l,s]=t({}),[c,f]=t(!1),g=()=>{u(e),s({})},p=(e,t)=>{const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const r of n){const n=e[r],i=t[r],o=null!==(a=n)&&"object"==typeof a;if(!o&&n!==i)return!1;if(o&&!p(n,i))return!1}var a;return!0};return n(()=>{console.log("datamodel",o),console.log("validation error:",l)},[o,l]),n(()=>{},[]),{dataModel:o,validationErrors:l,isBusy:c,handleChange:({field:e,value:t})=>{const n=a({},o);n[e]=t,u(n),(async(e,t)=>{const n=a({},l);try{const a=r.reach(i,e);await a.validate(t),delete n[e]}catch(t){n[e]=t.message}finally{s(n)}})(e,t)},handleSubmit:async(e,t,n=!0,r={})=>{e.preventDefault();const a=await(async()=>{const e={abortEarly:!1,context:i.cast(o)},t={};try{return await i.validate(o,e),null}catch(e){return e.inner.forEach(e=>{t[e.path]=e.message}),t}})();if(a)return s(a);try{f(!0),await new Promise(async(r,a)=>{try{return await t(o,e),n&&g(),r()}catch(e){return a(e)}})}catch(e){console.log(e)}f(!1)},initiateDataModel:function(e){u(e)},isFormValid:()=>0===Object.keys(l).length,resetForm:g,hasUnsavedData:()=>!p(e,o)}}function u(){const[t,n]=e.useState(!1);return{isOpen:t,toggle:()=>{n(e=>!e)}}}Object.byString=function(e,t){let n=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");for(let t=0,r=n.length;t<r;++t){let r=n[t];if(!(r in e))return;e=e[r]}return e};const l={currentPage:1,hasNextPage:!1,hasPrevPage:!1,nextPage:null,prevPage:null,size:10,totalPages:0,totalResults:0};function s(){const[e,n]=t(l);return{pagination:e,updatePaginaion:function(e=l){if("number"!=typeof e.currentPage)throw new Error("currentPage must be a number");if("boolean"!=typeof e.hasNextPage)throw new Error("currentPage must be a number");if("boolean"!=typeof e.hasPrevPage)throw new Error("hasPrevPage must be a boolean");if("number"!=typeof e.nextPage&&null!==e.nextPage)throw new Error("nextPage must be a number or null");if("number"!=typeof e.prevPage&&null!==e.prevPage)throw new Error("prevPage must be a number or null");if("number"!=typeof e.size)throw new Error("size must be a number");if("number"!=typeof e.totalPages)throw new Error("totalPages must be a number");if("number"!=typeof e.totalResults)throw new Error("totalResults must be a number");n(e)}}}function c(t){let n={};t.forEach(e=>{n[e.action]={status:e.status,id:null}});let[r,i]=e.useState(n);return{processing:r,dispatch:e=>{i(t=>{let n=Object.keys(e)[0],r=Object.values(e)[0],i=a({},t);return i[n]=r,i})}}}function f(){const[t,n]=e.useState(!1),r=e.useRef(null);return{contentElementReference:r,copySuccess:t,copyFormatedToClipboard:async function(){if(r.current&&navigator.clipboard){try{await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([r.current.innerHTML],{type:"text/html"})})]),n(!0),console.log("Contentns copied.")}catch(e){console.log("Error copying to clipboard."),console.log(e)}setTimeout(()=>n(!1),2500)}},copyPlainTextToClipBoard:async function(e,t=()=>{}){navigator.clipboard&&(n(!0),await navigator.clipboard.writeText(e),setTimeout(()=>n(!1),2500))}}}export{i as useBuildQueryString,f as useClipboard,u as useDualStateController,o as useForm,s as usePaginationState,c as useProcessing};
//# sourceMappingURL=index.modern.mjs.map
